---
title: 'Micro-Frontend Part 3: Federating a Remote API Service with Sitecore Component-level Data Fetching.'
date: '2025-6-02'
summary: TODO summary
tags: ['Sitecore', 'Module Federation']
draft: true
images: ['/static/images/blog-thumbnails/500x300_module-federation-sitecore.png']
authors: ['default']
---

Incase you missed it, in the previous ~~episode of Dragon Ball Z~~ Module Federation Post [Part 2](/blog/2025/microfrontends-part-2-injecting-federated-components-into-sitecore-apps) we exposed a couple Remote Product-related components into our Sitecore Next.js app. 

Today in Part 3, we will dive deeper into Remote Components by creating a Product Detail component and Product Detail Page (PDP) Service in Remote that uses the Sitecore component-level data fetching in the Host App, along with a Sitecore wildcard for the PDP Detail page.

## The Scenario
We've been tasked to control all of the PDP's under a single page presentation, but the Products themselves are still managed somewhere else, such as a PIM, and the client's `PDP Team Vertical` is solely in charge of the PDP functionality, so we need Sitecore to stay within the content lane for this one.

## Implement the PDP Wildcard
First we need to implement the PDP Wildcard page. The [Accelerate Cookbook for XM Cloud](https://developers.sitecore.com/learn/accelerate/xm-cloud/implementation/information-architecture/wildcard-pages) documents the implementation of a Wildcard page well. The only page router difference in my app is the use of `getServerSideProps` over `getStaticProps`, as seen here on the [demo github repo](https://github.com/bewards/MicroFrontend-Sitecore/blob/main/mf_marketing/headapps/nextjs-starter/src/pages/product/%5B...path%5D.tsx).

## Implement the PDP Wrapper Component
The PDP data-fetching will be done within the Sitecore wrapper component using Sitecore's Component `getServerSideProps` data-level fetching. We will import the Remote's PDP Service, call the service with the wild card's page path, and return the matching product data to the Host wrapper component, which in turn will pass the props down into the Remote PDP component. 

Note: The Host wrapper component will need a Sitecore JSS Rendering control item added to presentation details in Sitecore, if that wasn't clear. From the demo github repo, you can also `sitecore serialization push` to an empty sandbox instance to create all of the necessary content for the demo.

In the React component below I've highlighted all the MF specific parts:

```tsx {5,12,22,41,42} showLineNumbers
import React, { Suspense } from 'react';
import { GetServerSideComponentProps } from '@sitecore-jss/sitecore-jss-nextjs';
import { PDPService } from 'mf_catalog/PDPService';
import PDPLoader from 'components/Loaders/PDPLoader';
import { ResponseData_PDP } from 'mf_catalog/_types/types/product';

// type "ResponseData_PDP" comes from remote module mf_catalog!
type ProductDetail = ResponseData_PDP & {
  propFromComponentServerSideProps: string;
};

const MF_ProductDetail = React.lazy(() => import('mf_catalog/ProductDetail'));

const ProductDetail: React.FC<ProductDetail> = (props) => {
  // console.log('ProductDetail props', props);
  if (!props) {
    return <></>;
  }
  return (
    <>
      <Suspense fallback={<PDPLoader />}>
        <MF_ProductDetail {...props}>
          <section className="mt-2 outline-4 outline-offset-[-2px] outline-blue-500">
            <p>Product Detail Children content (from Sitecore)</p>
          </section>
        </MF_ProductDetail>
      </Suspense>
    </>
  );
};

export const getServerSideProps: GetServerSideComponentProps = async (
  rendering,
  layoutData,
  context
) => {
  console.log('ProductDetail getServerSideProps', rendering, layoutData, context);

  // Calling the PDPService.getPDP() method from the mf_catalog module
  const actualRequestPath = (context?.params?.requestPath as string) || '';
  const pdpService = new PDPService(actualRequestPath);
  const pdp = await pdpService.getPDP();

  return { propFromComponentServerSideProps: 'hello there server', ...pdp };
};

export default ProductDetail;
```

## Implement the Remote Catalog PDP Component and Service
The Remote Catalog component is fairly trivial since it's only dealing with presentational logic:

```tsx

```